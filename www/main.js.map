{"version":3,"sources":["webpack:///webpack/bootstrap 09c8ef818f7a786fc171","webpack:///./src/main.js","webpack:///./src/Test.js","webpack:///./src/Preferiti.js","webpack:///./src/Wallet.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 09c8ef818f7a786fc171\n **/","var Test = require('./Test');\nvar Preferiti = require('./Preferiti');\nvar Wallet = require('./Wallet');\n\nvar p = Preferiti.elenca();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","class Test {\n\t\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Test.js\n **/","/////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Gestione dei percorsi preferiti\n//\n/////////////////////////////////////////////////////////////////////////////////////////////\n\nexport class Preferiti {\n    constructor() {\n        var preferiti = localStorage.getItem('OYM.preferiti');\n        var percorsi;\n\n        // Carica i preferiti, dal localStorage, oppure li crea\n        if (preferiti === 'undefined' || preferiti === null) {\n            percorsi = inizializzaPercorsi();\n            localStorage.setItem('OYM.preferiti', JSON.stringify(percorsi));\n        } else {\n            percorsi = JSON.parse(preferiti);\n            // potremmo avere un nuovo museo, o averne cancellato uno\n            if (percorsi.museo.length != preferiti.museo.length) {\n                percorsi = inizializzaPercorsi();\n            }\n        }\n\n        this.percorsi = percorsi;\n    }\n\n    // Inizializza i preferiti, copiando dai percorsi, un museo fra i preferiti \n    // per ogni percorso.\n    inizializzaPercorsi() {\n        var percorsi = {};\n        percorsi.museo = new Array(app.percorsi.museo.length);\n\n        for (var i = 0; i < app.percorsi.museo.length; i++) {\n            percorsi.museo[i] = {};\n            percorsi.museo[i].ordine = i;\n            percorsi.museo[i].nome = app.percorsi.museo[i].nome;\n            percorsi.museo[i].percorso = [];\n        }\n\n        return percorsi;\n    }\n\n    // estrae un percorso preferito\n    leggi(museo, indice) {\n        var ilMuseo = this.percorsi.museo[museo];\n        return ilMuseo.percorso[indice];\n    }\n\n    // crea un percorso\n    crea(museo) {\n        var ilMuseo = this.percorsi.museo[museo];\n\n        var primoLibero = ilMuseo.percorso.length;\n        var dt = new Date();\n\n        ilMuseo.percorso[primoLibero] = {};\n        ilMuseo.percorso[primoLibero].ordine = primoLibero;\n        ilMuseo.percorso[primoLibero].by = app.user;\n        ilMuseo.percorso[primoLibero].tappa = [];\n\n        /* aggiunto by Max */\n        var titolo = $('#preferiti_titolo').val();\n        var sottotitollo = $('#preferiti_sottotitolo').val();\n\n        if (titolo === undefined || titolo === null || titolo === '') {\n            ilMuseo.percorso[primoLibero].id = ilMuseo.nome + ' - ' +\n                dt.toLocaleDateString() + ' ' + primoLibero;\n        } else {\n            ilMuseo.percorso[primoLibero].id = titolo;\n        }\n        if (sottotitollo === undefined || sottotitollo === null || sottotitollo === '') {\n            ilMuseo.percorso[primoLibero].sottotitolo = app.stringhe.percorso_sottotitolo_default;\n        } else {\n            ilMuseo.percorso[primoLibero].sottotitolo = sottotitollo;\n        }\n\n        salvaPercorsi();\n\n        return primoLibero;\n    }\n\n    // Elenco dei percorsi preferiti creati per un dato museo\n    elenca(museo) {\n        return percorsi.museo[museo].percorso;\n    }\n\n    //\n    // salva una tappa nei preferiti\n    //\n    aggiungiTappa(museo, indice, tappa) {\n        var percorso = leggi(museo, indice);\n\n        percorso.immagine = tappa.immagine;\n        var i = percorso.tappa.push(tappa);\n        salvaPercorsi();\n\n        return i - 1;\n    }\n\n    salvaPercorsi() {\n        localStorage.setItem('OYM.preferiti', JSON.stringify(percorsi));\n    }\n\n    salvaPercorsoA(museo, indice, percorso, tappa) {\n        aggiungiTappa(museo, indice, app.percorsi.museo[museo].percorso[percorso].tappa[tappa]);\n        chiudiDialog();\n    }\n\n    creaPreferito(museo, percorso, tappa) {\n        var i = crea(museo);\n        aggiungiTappa(museo, i, app.percorsi.museo[museo].percorso[percorso].tappa[tappa]);\n        chiudiDialog();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Preferiti.js\n **/","/////////////////////////////////////////////////////////////////////////////////////////////\n//\n// Gestione del wallet\n//\n/////////////////////////////////////////////////////////////////////////////////////////////\n\nexport class Wallet {\n\n    // Carica il wallet, dal localStorage, oppure lo crea\n    constructor() {\n        var wlt = localStorage.getItem('OYM.wallet');\n\n        // XXX se il wallet contiene meno elementi dei musei inizializzare comunque\n        if (wlt === 'undefined' || wlt === null) {\n            foto = inizializzaWallet();\n            salvaWallet();\n        } else {\n            foto = JSON.parse(wlt);\n            if (percorsi.museo.length != wallet.length) {\n                wallwr = inizializzaWallet();\n            }\n        }\n    }\n\n    // Inizializza il wallet, copiando dai percorsi, un wallet per ogni museo\n    inizializzaWallet() {\n        var foto = []; // new Array(app.percorsi.museo.length);\n\n        // // Si potrebbe fare un wallet per museo, ma poi bisogna tenere traccia del museo \n        // // corrente, o passarsi il museo per diverse funzioni.\n        // for (var i = 0; i < app.percorsi.museo.length; i++) {\n        //     foto[i] = [];\n        // }\n\n        return foto;\n    }\n\n    // aggiunge una struttura all'archivio delle foto\n    aggiungiFoto(path) {\n        // Costruisco un oggetto perché è più facile da utilizzare nel template\n        // XXX qui si dovrebbe annotare la foto con altri dati; museo, data ..\n        var d = new Date();\n        var data = {};\n        data.immagine = path;\n        data.data = d.toLocaleDateString();\n        data.ora = d.toLocaleTimeString();\n        data.testo = app.camera.testo;\n        foto.push(data);\n        salvaWallet();\n    }\n\n    salvaWallet() {\n        localStorage.setItem('OYM.wallet', JSON.stringify(foto));\n    }\n\n    //\n    // Spazzola l'array di un museo eliminando foto che non esistono più\n    //\n    leggi(museo, indice) {\n        assert(typeof app.wallet !== 'undefined');\n        assert(typeof foto !== 'undefined');\n        var laFoto = foto[museo][indice];\n        var reply = null;\n        var that = this;\n        // var img = new Image();\n        // img.onLoad() {\n        //     laFoto = null;\n        // };\n        // img.src = laFoto;\n\n        return laFoto;\n    }\n}\n\nmodule.exports = {\n    Wallet: Wallet\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/Wallet.js\n **/"],"sourceRoot":""}